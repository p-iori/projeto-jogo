<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Climate+Crisis:YEAR@2012&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="planetas.css">
    <title>E S P A Ç O</title>
</head>

<body>

    <!-- MODAL -->

    <div class="modal hide fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">
                        Um pouso turbulento...
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span class="fechar" aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Ao me aproximar do planeta recebo um sinal da minha nave indicando um grande objeto metálico
                    localizado próximo ao seu equador, talvez ele me ajude a descobrir o que aconteceu por aqui.
                </div>
                <div class="modal-footer">
                    *Esse planeta contém um pedaço das coordenadas da frota humana
                </div>
            </div>
        </div>
    </div>

    <main>
        <div class="passo ativo" id="passo-0">
            <img src="../../imgs/paisagens/paisagemPlaneta1.png" alt="">
            <p>Ao me aproximar, percebo que o objeto metálico se trata, na verdade, de uma nave caída, que se parece
                muito com uma das naves de escolta humana. Essas naves foram projetadas para acompanhar as grandes naves
                de evacuação e auxiliar em caso de emergência, essa em específico é um modelo SR-1, com 3 andares e 60
                metros de comprimento, pelas inscrições na lateral, ela foi batizada de Normandy. Não vejo cadaveres,
                mas ela parece ter sido atingida por
                algo que causou um grande buraco na fuselagem. O que devo fazer?</p>
            <button class="btn-proximo" data-proximo="1">[Entrar na nave para investigar]</button>
            <button class="btn-proximo" onclick="sairDoPlaneta()">[Voltar para órbita]</button>
        </div>
        <div class="passo" id="passo-1">
            <img src="../../imgs/navecaida.png" id="naveCaida">
            <p id="textoPequeno-1">Após entrar na nave por uma janela quebrada, me encontro no hall principal, completamente destruído pela
                queda...</p>
            <button class="btn-proximo" data-proximo="2">[Ir para a cabine de comando]</button>
            <button class="btn-proximo" data-proximo="buraco">[Ir para o buraco na fuselagem]</button>
        </div>

        <!--Buraco na fuselagem-->
        <div class="passo" id="passo-buraco">
            <img src="../../imgs/navecaida.png" id="naveCaida">
            <p>Me dirigo ao buraco na fuselagem, próximo aos motores. Rapidamente percebo que provavelmente ele não foi
                causado por uma colisão, e sim por algo que atravessou a nave. O buraco parece ter cerca de 2 metros e meio de diâmetro. O que poderia ter acontecido aqui?</p>
            <button class="btn-proximo" data-proximo="1">[Voltar]</button>
        </div>

        <div class="passo" id="passo-2">
            <img src="../../imgs/navecaida.png" id="naveCaida">
            <p>Sigo para a cabine de comando, lá ficam armazenados os dados de navegação, assim como as caixas-pretas da
                nave. Ao abrir a porta emperrada, com certa dificuldade, me deparo com algumas telas ligadas em um
                painel funcionando a partir da geradores de emergência. Aparentemente se trata do sistema de navegação
                da nave, que deve conter os logs mais recentes de navegação, incluindo as coordenadas inseridas como
                destino da frota que essa nave escoltava. </p>
            <button class="btn-proximo" data-proximo="3" onclick="iniciaTerminal()">[Investigar as telas]</button>
        </div>

        <div class="passo" id="passo-3">
            <p class="subpasso ativo" id="0">Ao me aproximar das telas percebo um painel muito parecido com o presente
                na minha nave, rapidamente
                alcanço o botão verde que, por padrão, é o responsável por reiniciar os sistemas nas naves construídas
                durante a era da grande evacuação. Ao pressiona-lo, as telas (que não foram destruídas pela queda) ao
                meu redor se apagam, apenas para acenderem novamente, exibindo uma espécie de terminal. Aparentemente
                boa parte dos dados foram perdidos durante esse estranho incidente, mas talvez eu possa pesquisar pelas
                últimas coordenadas inseridas na navegação, que me dariam o destino da frota humana:</p>
            <div class="subpasso" id="1">
                <p id="texto-subpasso2">
                    Ao procurar pelo arquivo com as coordenadas recentes, o console exibe a informação de que eu devo
                    inserir uma senha para acessa-lo. Normalmente, as naves de modelo SR, como essa que caiu, possuem um
                    modelo padrão de senha para seus arquivos, elas são construídas da seguinte forma: evacSR--[Número
                    de
                    letras do nome da nave * 3 primeiros dígitos de seu serial]<br />Essas informações não devem ser
                    dificieis de encontrar...
                </p>
                <div class="inserirSenha">
                    <input type="text" placeholder="evacSR--XXXX" maxlength="12" id="inputSenha" autocomplete="off">
                    <input type="submit" value="Enter" id="enter">
                </div>
            </div>
            <div>
                <h2>
                    CONSOLE NORMANDY SR-1
                </h2>
                <div id="terminal">
                </div>
            </div>
            <button class="btn-subpasso" data-proximo="1" onclick="continuaTerminal()">[Pesquisar pelas
                coordenadas]</button>
            <button class="btn-redireciona inativo" id="btn-redireciona-1" onclick="redirecionaCoord1()">[Abrir
                Arquivo]</button>
        </div>
    </main>

    <!-- JSQUERY/POPPER/BOOTSTRAP -->

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script src="scriptPlanetas.js"></script>
    <script>

        var aText = new Array(
            "$ INICIALIZANDO......",
            "$ SSV NORMANDY SR-1",
            "$ SERIAL: 126383",
            "$ Obtendo dados......",
            "$ Impossível obter: logs_seguranca",
            "$ Impossível obter: dados_funcao",
            "$ Impossível obter: logs_formacao",
            "$ Impossível obter: logs_comunicacao",
            "$ Impossível obter: mapas_navegacao",
            "#########################################",
            "$ SEJA BEM_VINDO user_rafalindo123!",
            ">>> get logs_navegacao",
            "$ Obtendo: logs_navegacao",
            "$ O arquivo 'logs_navegacao' é protegido por senha,<br /> insira a senha para acessar o arquivo:",
            ">>> ************",
            "$ Senha correta! Acessando o arquivo.....",
            "$ O arquivo 'logs_navegacao' está parcialmente corrompido,<br /> deseja abri-lo mesmo assim?",
            ">>> Sim"
        );
        var iSpeed = 40;
        var iIndex = 0;
        var iArrLength = aText[0].length;
        var iScrollAt = 20;
        var iTextPos = 0;
        var sContents = '';
        var iRow;
        var tempLength = 0;

        function terminal() {

            sContents = ' ';
            iRow = Math.max(0, iIndex - iScrollAt);
            var destination = document.getElementById("terminal");

            while (iRow < iIndex) {
                sContents += aText[iRow++] + '<br />';
            }
            destination.innerHTML = sContents + aText[iIndex].substring(0, iTextPos) + "_";

            if (iTextPos++ == iArrLength) {
                iTextPos = 0;
                iIndex++;

                if (iIndex < tempLength) {
                    iArrLength = aText[iIndex].length;
                    setTimeout("terminal()", iSpeed);
                }

            } else {
                setTimeout("terminal()", iSpeed);
            }

        }

        function continuaTerminal() {
            tempLength = 14;
            terminal();
        }

        terminal()

        //torna possível a interação com o campo de inserir senha
        document.getElementById('enter').addEventListener('click', confereSenha);

        document.getElementById('inputSenha').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                confereSenha();
            }
        });

        //confere se a senha está correta e faz as alterações necessárias na página
        function confereSenha() {
            let inputSenha = document.getElementById('inputSenha');
            let senha = inputSenha.value;
            console.log(senha);

            if (senha == "evacSR--1008" || senha == "evacSR--[1008]") {
                inputSenha.classList.add("inativo");
                document.getElementById('enter').classList.add("inativo");
                document.getElementById('texto-subpasso2').classList.add("inativo");
                document.getElementById('btn-redireciona-1').classList.remove("inativo")
                tempLength += 3;
                terminal();
            } else if (senha !== "" && senha !== "evacSR--1008") {
                alert("Senha incorreta!");
            } else if (senha == "") {
                alert("Insira a senha antes de dar enter!");
            }
        }

        function redirecionaCoord1() {
            location.replace("fragCoord1.html");
        }

        function iniciaTerminal(){
            tempLength = 11;
            terminal()
        }


    </script>
</body>

</html>